{"version":3,"sources":["components/Div/Div.jsx","constants/index.js","containers/Game/Game.jsx","components/P/P.jsx","components/Button/Button.jsx","components/Span/Span.jsx","containers/Info/Info.jsx","components/H1/H1.jsx","helpers/LS.js","App.js","serviceWorker.js","helpers/clonedeep.js","reducers/index.js","index.js"],"names":["Div","props","react_default","a","createElement","className","cn","onClick","Children","toArray","children","POSSIBLE_STEPS","LOCALSTORAGE_SESSION_NAME","LOCALSTORAGE_HISTORY_NAME","Game","clickHandler","e","_this$props","_this","emptyIndex","array","number","target","innerText","index","findIndex","i","parseInt","forEach","step","move","newIndex","_this$props2","onUpdate","onSaveGame","onCheckResult","onMove","empty","newValue","_this2","this","map","components_Div_Div","key","concat","Component","P","Button","Span","Info","resetGame","onResetGame","undo","onUndo","components_P_P","isWin","components_Span_Span","moves","components_Button_Button","H1","LS","LocalStorage","Object","classCallCheck","_ls","window","localStorage","result","getItem","JSON","parse","err","console","warn","obj","item","stringify","setItem","removeItem","clear","App","componentDidMount","get","game","dispatch","type","payloads","mixedArray","saveSession","set","onUpdateMixedCells","onIncrementMoves","remove","win","isSavedSession","components_H1_H1","containers_Info_Info","containers_Game_Game","connect","state","initialArray","history","Boolean","location","hostname","match","clonedeep","src","dest","Array","keys","initialState","reducer","arguments","length","undefined","action","sort","Math","random","tmp","objectSpread","_action$payloads","_action$payloads2","tmpMixed","push","some","parsed","lastMove","splice","alert","store","createStore","ReactDOM","render","es","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b7424949.chunk.js","sourcesContent":["import React, { Children } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Div = (props) => {\r\n    return (\r\n        <div className={props.cn} onClick={props.onClick}>\r\n            {Children.toArray(props.children)}\r\n        </div>\r\n    );\r\n};\r\n\r\nDiv.propTypes = {\r\n    cn: PropTypes.string,\r\n    onClick: PropTypes.func,\r\n    children: PropTypes.node\r\n};\r\n\r\nexport default Div;","export const INITIAL_ARRAY = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15]; //16th for empty cell\r\nexport const INITIAL_POSITION_OF_EMPTY_CELL = 15;\r\nexport const POSSIBLE_STEPS = [-4, 1, +4, -1]; // Top, right, down, left\r\nexport const LOCALSTORAGE_SESSION_NAME = 'toxuh_fifteens_session';\r\nexport const LOCALSTORAGE_HISTORY_NAME = 'toxuh_fifteens_history';","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Div from \"../../components/Div\";\r\n\r\nimport {\r\n    POSSIBLE_STEPS\r\n} from \"../../constants/index\";\r\n\r\nimport './Game.css';\r\n\r\nclass Game extends Component {\r\n    static propTypes = {\r\n        array: PropTypes.arrayOf(PropTypes.oneOfType([\r\n            PropTypes.number,\r\n            PropTypes.string\r\n        ])),\r\n        emptyIndex: PropTypes.number,\r\n        onUpdate: PropTypes.func,\r\n        onSaveGame: PropTypes.func,\r\n        onCheckResult: PropTypes.func,\r\n        onMove: PropTypes.func\r\n    };\r\n\r\n    clickHandler = (e) => {\r\n        const {\r\n            emptyIndex,\r\n            array\r\n        } = this.props;\r\n        const number = e.target.innerText;\r\n\r\n        // If click on number cell\r\n        if (number) {\r\n            const index = array.findIndex(i => i === parseInt(number));\r\n\r\n            POSSIBLE_STEPS.forEach(step => {\r\n                // Checks that it is possible move\r\n                if (\r\n                    ((emptyIndex + step < 16) && (emptyIndex + step === index)) ||\r\n                    ((emptyIndex + step > 0) && (emptyIndex + step === index))\r\n                ) {\r\n                    this.move(index);\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    move = (newIndex) => {\r\n        const {\r\n            emptyIndex,\r\n            array,\r\n            onUpdate,\r\n            onSaveGame,\r\n            onCheckResult,\r\n            onMove\r\n        } = this.props;\r\n        const empty = array[emptyIndex];\r\n        const newValue = array[newIndex];\r\n\r\n        // Making array with new positions\r\n        array[newIndex] = empty;\r\n        array[emptyIndex] = newValue;\r\n\r\n        // Increment moves counter\r\n        onMove();\r\n\r\n        // Update app with new array\r\n        onUpdate(array, newIndex);\r\n\r\n        // Save current game to local storage\r\n        onSaveGame();\r\n\r\n        // Check if game over\r\n        onCheckResult();\r\n    };\r\n\r\n    render() {\r\n        const { array } = this.props;\r\n\r\n        return (\r\n            <div className=\"Game\">\r\n                {array.map(number => {\r\n                    const empty = number === 'empty' ? 'empty' : '';\r\n\r\n                    return (\r\n                        <Div\r\n                            key={ number }\r\n                            cn={`Game__cell ${empty}`}\r\n                            onClick={this.clickHandler}\r\n                        >\r\n                            { number !== 'empty' && number }\r\n                        </Div>\r\n                    )\r\n                })}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Game;","import React, { Children } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst P = (props) => {\r\n    return (\r\n        <p className={props.cn}>\r\n            {Children.toArray(props.children)}\r\n        </p>\r\n    );\r\n};\r\n\r\nP.propTypes = {\r\n    cn: PropTypes.string,\r\n    children: PropTypes.node\r\n};\r\n\r\nexport default P;","import React, { Children } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Button = (props) => {\r\n    return (\r\n        <button\r\n            className={props.cn}\r\n            onClick={props.onClick}\r\n        >\r\n            {Children.toArray(props.children)}\r\n        </button>\r\n    );\r\n};\r\n\r\nButton.propTypes = {\r\n    cn: PropTypes.string,\r\n    onClick: PropTypes.func,\r\n    children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default Button;","import React, { Children } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Span = (props) => {\r\n    return (\r\n        <span className={props.cn}>\r\n            {Children.toArray(props.children)}\r\n        </span>\r\n    );\r\n};\r\n\r\nSpan.propTypes = {\r\n    cn: PropTypes.string,\r\n    children: PropTypes.node\r\n};\r\n\r\nexport default Span;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport P from \"../../components/P\";\r\nimport Button from \"../../components/Button/Button\";\r\nimport Span from \"../../components/Span/Span\";\r\n\r\nimport './Info.css';\r\n\r\nclass Info extends Component {\r\n    static propTypes = {\r\n        moves: PropTypes.number,\r\n        isWin: PropTypes.bool,\r\n        onResetGame: PropTypes.func,\r\n        onUndo: PropTypes.func\r\n    };\r\n\r\n    resetGame = () => {\r\n        this.props.onResetGame();\r\n    };\r\n\r\n    undo = () => {\r\n        this.props.onUndo();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Info\">\r\n                <P cn=\"Info__steps\">\r\n                    {this.props.isWin ? (\r\n                        <Span cn=\"Info__greetings\">YOU WIN! Number of moves: {this.props.moves}</Span>\r\n                    ) : (\r\n                        <Span>\r\n                            Moves:\r\n                            <Span cn=\"Info__counter\">{this.props.moves}</Span>\r\n                            <Button\r\n                                cn=\"Info__button\"\r\n                                onClick={this.undo}\r\n                            >\r\n                            Undo\r\n                        </Button>\r\n                        </Span>\r\n                    )}\r\n                    <Button\r\n                        cn=\"Info__button\"\r\n                        onClick={this.resetGame}\r\n                    >\r\n                        Reset Game\r\n                    </Button>\r\n                </P>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Info;","import React, { Children } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst H1 = (props) => {\r\n    return (\r\n        <h1 className={props.cn} >\r\n            {Children.toArray(props.children)}\r\n        </h1>\r\n    );\r\n};\r\n\r\nH1.propTypes = {\r\n    cn: PropTypes.string,\r\n    children: PropTypes.node.isRequired\r\n};\r\n\r\nexport default H1;","class LocalStorage {\r\n    constructor() {\r\n        this._ls = window.localStorage;\r\n    }\r\n\r\n    get(key) {\r\n        let result = this._ls.getItem(key);\r\n\r\n        /**\r\n         * Hack for undefined\r\n         */\r\n        try {\r\n            result = JSON.parse(result);\r\n        } catch (err) {\r\n            console.warn(err);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    set(key, obj) {\r\n        const item = JSON.stringify(obj);\r\n\r\n        this._ls.setItem(key, item);\r\n    }\r\n\r\n    remove(key) {\r\n        this._ls.removeItem(key);\r\n    }\r\n\r\n    clear() {\r\n        this._ls.clear();\r\n    }\r\n}\r\n\r\nexport default new LocalStorage();","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport Game from './containers/Game';\nimport Info from './containers/Info';\n\nimport H1 from \"./components/H1/H1\";\nimport P from \"./components/P/P\";\n\nimport LocalStorage from './helpers/LS'\n\nimport {\n    LOCALSTORAGE_HISTORY_NAME,\n    LOCALSTORAGE_SESSION_NAME\n} from './constants'\n\nimport './App.css';\n\nclass App extends Component {\n    componentDidMount = () => {\n        if (LocalStorage.get(LOCALSTORAGE_SESSION_NAME)) {\n            const game = JSON.parse(LocalStorage.get(LOCALSTORAGE_SESSION_NAME));\n\n            this.props.dispatch({\n                type: 'LOAD_GAME',\n                payloads: {\n                    mixedArray: game.array,\n                    emptyIndex: game.empty,\n                    moves: game.moves\n                }\n            })\n        } else {\n            this.props.dispatch({\n                type: 'MIX_ARRAY'\n            });\n\n            this.props.dispatch({\n                type: 'UPDATE_HISTORY'\n            });\n        }\n    };\n\n    saveSession = () => {\n        const game = {\n            array: this.props.mixedArray,\n            empty: this.props.emptyIndex,\n            moves: this.props.moves\n        };\n\n        LocalStorage.set(LOCALSTORAGE_SESSION_NAME, JSON.stringify(game));\n    };\n\n    onUpdateMixedCells = (array, empty) => {\n        this.props.dispatch({\n            type: 'UPDATE_BOARD',\n            payloads: {\n                mixedArray: array,\n                emptyIndex: empty\n            }\n        });\n\n        this.props.dispatch({\n            type: 'UPDATE_HISTORY'\n        });\n    };\n\n    onCheckResult = () => {\n        this.props.dispatch({\n            type: 'CHECK_GAME'\n        })\n    };\n\n    onIncrementMoves = () => {\n        this.props.dispatch({\n            type: 'MOVE'\n        });\n    };\n\n    onResetGame = () => {\n        LocalStorage.remove(LOCALSTORAGE_SESSION_NAME);\n        LocalStorage.remove(LOCALSTORAGE_HISTORY_NAME);\n\n        this.props.dispatch({\n            type: 'MIX_ARRAY'\n        });\n\n        this.props.dispatch({\n            type: 'UPDATE_HISTORY'\n        });\n    };\n\n    onUndo = () => {\n        this.props.dispatch({\n            type: 'UNDO'\n        });\n\n        this.props.dispatch({\n            type: 'UPDATE_HISTORY'\n        });\n    };\n\n    render() {\n        const {\n            mixedArray,\n            emptyIndex,\n            win,\n            moves,\n            isSavedSession\n        } = this.props;\n\n        return (\n            <div className=\"App\">\n                <H1 cn=\"App__heading\">Fifteens game</H1>\n                { isSavedSession && (\n                    <P cn=\"App__lead\">\n                        Yor game was restored from last session.\n                    </P>\n                ) }\n                <Info\n                    moves={moves}\n                    isWin={win}\n                    onResetGame={this.onResetGame}\n                    onUndo={this.onUndo}\n                />\n                {mixedArray &&\n                    <Game\n                        array={mixedArray}\n                        emptyIndex={emptyIndex}\n                        onUpdate={this.onUpdateMixedCells}\n                        onSaveGame={this.saveSession}\n                        onCheckResult={this.onCheckResult}\n                        onMove={this.onIncrementMoves}\n                    />\n                }\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    initialArray: state.initialArray,\n    emptyIndex: state.emptyIndex,\n    mixedArray: state.mixedArray,\n    win: state.win,\n    moves: state.moves,\n    isSavedSession: state.isSavedSession,\n    history: state.history\n});\n\nexport default connect(mapStateToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","const clonedeep = (src) => {\r\n    let dest = src instanceof Array ? [] : {};\r\n\r\n    Object.keys(src).forEach(key => {\r\n        if ((src instanceof Array) && typeof src[key] === 'object' && src[key] !== null) {\r\n            dest[key] = clonedeep(src[key]);\r\n        } else {\r\n            dest[key] = src[key];\r\n        }\r\n    });\r\n\r\n    return dest;\r\n};\r\n\r\nexport default clonedeep;","import clonedeep from '../helpers/clonedeep'\r\n\r\nimport LocalStorage from '../helpers/LS'\r\nimport {\r\n    INITIAL_ARRAY,\r\n    INITIAL_POSITION_OF_EMPTY_CELL,\r\n    LOCALSTORAGE_HISTORY_NAME\r\n} from \"../constants\";\r\n\r\nconst initialState = {\r\n    initialArray: INITIAL_ARRAY,\r\n    emptyIndex: INITIAL_POSITION_OF_EMPTY_CELL,\r\n    mixedArray: null,\r\n    win: false,\r\n    moves: 0,\r\n    isSavedSession: false,\r\n    history: []\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case 'MIX_ARRAY': {\r\n            const mixedArray = state.initialArray.sort(() => Math.random()-.5).concat('empty');\r\n            const tmp = clonedeep(mixedArray);\r\n\r\n            return {\r\n                ...state,\r\n                mixedArray,\r\n                moves: 0,\r\n                emptyIndex: INITIAL_POSITION_OF_EMPTY_CELL,\r\n                win: false,\r\n                isSavedSession: false,\r\n                history: [\r\n                    {\r\n                        mixedArray: tmp,\r\n                        moves: 0,\r\n                        emptyIndex: INITIAL_POSITION_OF_EMPTY_CELL\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n        case 'LOAD_GAME': {\r\n            const {\r\n                mixedArray,\r\n                emptyIndex,\r\n                moves\r\n            } = action.payloads;\r\n\r\n            return {\r\n                ...state,\r\n                mixedArray,\r\n                emptyIndex,\r\n                moves,\r\n                isSavedSession: true\r\n            }\r\n        }\r\n        case 'UPDATE_BOARD': {\r\n            const tmp = clonedeep(state.history);\r\n            const { emptyIndex, mixedArray } = action.payloads;\r\n            const tmpMixed = clonedeep(mixedArray);\r\n\r\n            tmp.push({\r\n                emptyIndex,\r\n                mixedArray: tmpMixed,\r\n                moves: state.moves\r\n            });\r\n\r\n            return {\r\n                ...state,\r\n                mixedArray,\r\n                emptyIndex,\r\n                history: tmp\r\n            }\r\n        }\r\n        case 'MOVE': {\r\n            return {\r\n                ...state,\r\n                moves: state.moves + 1\r\n            }\r\n        }\r\n        case 'CHECK_GAME': {\r\n            const win = !state.mixedArray.some((item, index) => {\r\n                return (item > 0) && (item -1 !== index)\r\n            });\r\n\r\n            return {\r\n                ...state,\r\n                win\r\n            }\r\n        }\r\n        case 'UNDO': {\r\n            const history = LocalStorage.get(LOCALSTORAGE_HISTORY_NAME);\r\n\r\n            if (history) {\r\n                const parsed = JSON.parse(history);\r\n\r\n                if (parsed.length > 1) {\r\n                    const lastMove = parsed[parsed.length - 2];\r\n                    const {\r\n                        mixedArray,\r\n                        emptyIndex,\r\n                        moves\r\n                    } = lastMove;\r\n\r\n                    parsed.splice(-1, 1);\r\n\r\n                    return {\r\n                        ...state,\r\n                        mixedArray,\r\n                        emptyIndex,\r\n                        moves,\r\n                        history: parsed\r\n                    }\r\n                } else {\r\n                    alert('Nothing to undo');\r\n                }\r\n            }\r\n\r\n            return state;\r\n        }\r\n        case 'UPDATE_HISTORY': {\r\n            LocalStorage.set(LOCALSTORAGE_HISTORY_NAME, JSON.stringify(state.history));\r\n\r\n            return state;\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\n\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}